!function(){"use strict";var e=class{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formEl=t}_showInputError(e){const t=this._formEl.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._formEl.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_checkInputValidity(e){if(!e.validity.valid)return this._showInputError(e);this._hideInputError(e)}_hasInvalidInput(){return!this._inputEls.every((e=>e.validity.valid))}toggleButtonState(){if(this._hasInvalidInput())return this._submitButton.classList.add(this._inactiveButtonClass),void(this._submitButton.disabled=!0);this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_setEventListeners(){this._inputEls=[...this._formEl.querySelectorAll(this._inputSelector)],this._submitButton=this._formEl.querySelector(this._submitButtonSelector),this._inputEls.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e),this.toggleButtonState()}))}))}enableValidation(){this._formEl.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners(this._formEl)}},t=class{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t),this._closeByEscape=this._closeByEscape.bind(this),this._closeByMouseDown=this._closeByMouseDown.bind(this)}open(){this._popupElement.classList.add("modal_opened"),this._setEventListeners()}close(){this._popupElement.classList.remove("modal_opened"),this._popupElement.removeEventListener("click",this._closeByMouseDown),document.removeEventListener("keydown",this._closeByEscape)}_closeByEscape=e=>{"Escape"===e.key&&this.close()};_closeByMouseDown=e=>{(e.target.classList.contains("modal")||e.target.classList.contains("modal__close"))&&this.close()};_setEventListeners(){document.addEventListener("keydown",this._closeByEscape),this._popupElement.addEventListener("click",this._closeByMouseDown)}},s=class extends t{constructor(e,t){super({popupSelector:e}),this._handleFormSubmit=t,this._popupForm=this._popupElement.querySelector(".modal__form")}close(){this._popupForm.reset(),this._popupElement.removeEventListener("submit",this._submitForm),super.close()}_getInputValues(){const e={};return this._popupForm.querySelectorAll(".modal__input").forEach((t=>{""!==t.value&&(e[t.name]=t.value)})),e}_submitForm=()=>{const e=this._getInputValues();this._handleFormSubmit(e)};_setEventListeners(){super._setEventListeners(),this._popupElement.addEventListener("submit",this._submitForm)}};const n={inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},i=document.querySelector("#profile-edit-button"),o=document.querySelector("#profile-edit-modal"),r=document.querySelector("#profile-title-input"),l=document.querySelector("#profile-description-input"),a=o.querySelector(".modal__form"),c=document.querySelector("#add-form-modal"),u=document.querySelector("#profile-add-button"),_=c.querySelector(".modal__form"),d=document.querySelector(".cards__list"),m=new class{constructor(e,t){this._nameElement=e,this._jobElement=t}getUserInfo(){const e={};return e.profileName=this._nameElement.textContent,e.description=this._jobElement.textContent,e}setUserInfo(e,t){this._nameElement.textContent=e,this._jobElement.textContent=t}}(document.querySelector(".profile__title"),document.querySelector(".profile__description")),p=new class extends t{constructor(e){super({popupSelector:e}),this._previewImageElement=document.querySelector(".modal__preview-image"),this._previewImageDescription=document.querySelector(".modal__preview-description")}open(e,t){this._previewImageElement.alt=e,this._previewImageDescription.textContent=e,this._previewImageElement.src=t,super.open()}}("#preview-modal"),h=new s("#profile-edit-modal",(function(e){const{nameInfo:t,jobInfo:s}=e;m.setUserInfo(t,s),h.close()})),E=new s("#add-form-modal",(function(e){const{name:t,link:s}=e;v({name:t,link:s}),E.close()}));function f(e){let{name:t,link:s}=e;p.open(t,s)}function v(e){const t=new class{constructor(e,t,s,n,i){this._name=e.name,this._link=e.link,this._templateSelector=t,this._handleCardImageClick=s,this._previewImageModal=n,this._previewDescriptionModal=i}_getTemplate(){return document.querySelector(`${this._templateSelector}`).content.querySelector(".card").cloneNode(!0)}_handleDeleteButton(){this._cardElement.remove(),this._cardElement=null}_handleLikeButton(){this._cardElement.querySelector(".card__like-button").classList.toggle("card__like-button_active")}_setEventListeners(){this._cardElement.querySelector(".card__image").addEventListener("click",(()=>{this._handleCardImageClick({name:this._name,link:this._link})})),this._cardElement.querySelector(".card__delete-button").addEventListener("click",(()=>this._handleDeleteButton())),this._cardElement.querySelector(".card__like-button").addEventListener("click",(()=>this._handleLikeButton()))}getCardElement(){return this._cardElement=this._getTemplate(),this._setEventListeners(),this._cardElement.querySelector(".card__title").textContent=this._name,this._cardElement.querySelector(".card__image").src=this._link,this._cardElement.querySelector(".card__image").alt=this._name,this._cardElement}}(e,"#card-template",f);y.addItem(t.getCardElement())}u.addEventListener("click",(()=>{w.toggleButtonState(),E.open()})),i.addEventListener("click",(()=>{const{profileName:e,description:t}=m.getUserInfo();r.value=e,l.value=t,S.toggleButtonState(),h.open()}));const y=new class{constructor(e,t){let{items:s,renderer:n}=e;this._items=s,this._renderer=n,this._containerElement=t}renderItems(){this._items.forEach(this._renderer)}addItem(e){this._containerElement.prepend(e)}prependItem(e){this._containerElement.prepend(e)}}({items:[{name:"Seattle, WA",link:"https://images.unsplash.com/photo-1502175353174-a7a70e73b362?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1426&q=80"},{name:"Denver, CO",link:"https://www.55places.com/wp-content/uploads/2022/11/downtown-denver-colorado.jpg"},{name:"Orlando, FL",link:"https://worldstrides.com/wp-content/uploads/2016/06/iStock_58068854_LARGE.jpg"},{name:"Las Vegas, NV",link:"https://images.unsplash.com/photo-1581351721010-8cf859cb14a4?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80"},{name:"Santa Monica, CA",link:"https://images.unsplash.com/photo-1498196645145-687fd3bfe912?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80"},{name:"Juneau, AK",link:"https://www.markkelley.com/wp-content/uploads/2019/11/orthern_Lights_Mendenhall_Glacier_Juneau_calendar_20171108_Mendenhall_Glacier_Northern_Lights_061-Edit-7-Edit-5-Edit-2-940x658.jpg"}],renderer:v},d);y.renderItems();const w=new e(n,_);w.enableValidation();const S=new e(n,a);S.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIENhcmQge1xuICAvLyBUaGUgY29uc3RydWN0b3IgZnVuY3Rpb24gaXMgY2FsbGVkIHdoZW4gYSBuZXcgaW5zdGFuY2Ugb2YgdGhlIGNsYXNzIGlzIGNyZWF0ZWQuXG4gIC8vIEl0IGluaXRpYWxpemVzIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBjYXJkIGluc3RhbmNlLlxuICBjb25zdHJ1Y3RvcihcbiAgICBkYXRhLFxuICAgIHRlbXBsYXRlU2VsZWN0b3IsXG4gICAgaGFuZGxlQ2FyZEltYWdlQ2xpY2ssXG4gICAgcHJldmlld0ltYWdlTW9kYWwsXG4gICAgcHJldmlld0Rlc2NyaXB0aW9uTW9kYWxcbiAgKSB7XG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTsgLy8gVGhlIG5hbWUgb2YgdGhlIGNhcmRcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rOyAvLyBUaGUgaW1hZ2UgbGluayBmb3IgdGhlIGNhcmRcbiAgICB0aGlzLl90ZW1wbGF0ZVNlbGVjdG9yID0gdGVtcGxhdGVTZWxlY3RvcjsgLy8gVGhlIHNlbGVjdG9yIGZvciB0aGUgY2FyZCdzIEhUTUwgdGVtcGxhdGVcbiAgICB0aGlzLl9oYW5kbGVDYXJkSW1hZ2VDbGljayA9IGhhbmRsZUNhcmRJbWFnZUNsaWNrOyAvLyBGdW5jdGlvbiB0byBoYW5kbGUgY2FyZCBpbWFnZSBjbGljayBldmVudFxuICAgIHRoaXMuX3ByZXZpZXdJbWFnZU1vZGFsID0gcHJldmlld0ltYWdlTW9kYWw7IC8vIFJlZmVyZW5jZSB0byB0aGUgaW1hZ2UgcHJldmlldyBtb2RhbFxuICAgIHRoaXMuX3ByZXZpZXdEZXNjcmlwdGlvbk1vZGFsID0gcHJldmlld0Rlc2NyaXB0aW9uTW9kYWw7IC8vIFJlZmVyZW5jZSB0byB0aGUgZGVzY3JpcHRpb24gcHJldmlldyBtb2RhbFxuICB9XG5cbiAgLy8gUmV0cmlldmVzIHRoZSBjYXJkIHRlbXBsYXRlIGZyb20gdGhlIERPTSBhbmQgY2xvbmVzIGl0XG4gIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICByZXR1cm4gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKGAke3RoaXMuX3RlbXBsYXRlU2VsZWN0b3J9YClcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcbiAgfVxuXG4gIC8vIEV2ZW50IGhhbmRsZXIgZm9yIHRoZSBkZWxldGUgYnV0dG9uIGNsaWNrIGV2ZW50XG4gIF9oYW5kbGVEZWxldGVCdXR0b24oKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7IC8vIFJlbW92ZSB0aGUgY2FyZCBlbGVtZW50IGZyb20gdGhlIERPTVxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gbnVsbDsgLy8gU2V0IHRoZSBjYXJkIGVsZW1lbnQgdG8gbnVsbFxuICB9XG5cbiAgLy8gRXZlbnQgaGFuZGxlciBmb3IgdGhlIGxpa2UgYnV0dG9uIGNsaWNrIGV2ZW50XG4gIF9oYW5kbGVMaWtlQnV0dG9uKCkge1xuICAgIC8vIFRvZ2dsZSB0aGUgJ2NhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZScgY2xhc3Mgb24gdGhlIGxpa2UgYnV0dG9uXG4gICAgdGhpcy5fY2FyZEVsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpXG4gICAgICAuY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcbiAgfVxuXG4gIC8vIFNldHMgdXAgZXZlbnQgbGlzdGVuZXJzIG9uIHRoZSBjYXJkIGVsZW1lbnRcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIC8vIEV2ZW50IGxpc3RlbmVyIGZvciB0aGUgY2FyZCBpbWFnZSBjbGljayBldmVudFxuICAgIHRoaXMuX2NhcmRFbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2hhbmRsZUNhcmRJbWFnZUNsaWNrKHsgbmFtZTogdGhpcy5fbmFtZSwgbGluazogdGhpcy5fbGluayB9KTtcbiAgICAgIH0pO1xuXG4gICAgLy8gRXZlbnQgbGlzdGVuZXIgZm9yIHRoZSBkZWxldGUgYnV0dG9uIGNsaWNrIGV2ZW50XG4gICAgdGhpcy5fY2FyZEVsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIilcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5faGFuZGxlRGVsZXRlQnV0dG9uKCkpO1xuXG4gICAgLy8gRXZlbnQgbGlzdGVuZXIgZm9yIHRoZSBsaWtlIGJ1dHRvbiBjbGljayBldmVudFxuICAgIHRoaXMuX2NhcmRFbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLl9oYW5kbGVMaWtlQnV0dG9uKCkpO1xuICB9XG5cbiAgLy8gQ3JlYXRlcyBhbmQgcmV0dXJucyB0aGUgY2FyZCBlbGVtZW50XG4gIGdldENhcmRFbGVtZW50KCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTsgLy8gQ2xvbmUgdGhlIGNhcmQgdGVtcGxhdGVcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpOyAvLyBTZXQgdXAgZXZlbnQgbGlzdGVuZXJzIG9uIHRoZSBjYXJkIGVsZW1lbnRcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTsgLy8gU2V0IHRoZSB0aXRsZSBvZiB0aGUgY2FyZFxuICAgIHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIikuc3JjID0gdGhpcy5fbGluazsgLy8gU2V0IHRoZSBpbWFnZSBzb3VyY2Ugb2YgdGhlIGNhcmRcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpLmFsdCA9IHRoaXMuX25hbWU7IC8vIFNldCB0aGUgYWx0IHRleHQgb2YgdGhlIGNhcmQgaW1hZ2VcblxuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDsgLy8gUmV0dXJuIHRoZSBjYXJkIGVsZW1lbnRcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBDYXJkO1xuIiwiY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIC8vIENvbnN0cnVjdG9yIGZ1bmN0aW9uIHRoYXQgaW5pdGlhbGl6ZXMgdGhlIEZvcm1WYWxpZGF0b3IgaW5zdGFuY2VcbiAgY29uc3RydWN0b3IoY29uZmlnLCBfZm9ybUVsKSB7XG4gICAgLy8gQ29uZmlndXJhdGlvbiBvcHRpb25zXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IGNvbmZpZy5pbnB1dFNlbGVjdG9yO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBjb25maWcuaW5wdXRFcnJvckNsYXNzO1xuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBjb25maWcuZXJyb3JDbGFzcztcblxuICAgIC8vIFRoZSBmb3JtIGVsZW1lbnRcbiAgICB0aGlzLl9mb3JtRWwgPSBfZm9ybUVsO1xuICB9XG5cbiAgLy8gRGlzcGxheXMgdGhlIGlucHV0IGVycm9yIG1lc3NhZ2UgYW5kIGFwcGxpZXMgZXJyb3Igc3R5bGVzIHRvIHRoZSBpbnB1dCBlbGVtZW50XG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsKSB7XG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtRWwucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IGlucHV0RWwudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfVxuXG4gIC8vIEhpZGVzIHRoZSBpbnB1dCBlcnJvciBtZXNzYWdlIGFuZCByZW1vdmVzIGVycm9yIHN0eWxlcyBmcm9tIHRoZSBpbnB1dCBlbGVtZW50XG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKSB7XG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtRWwucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfVxuXG4gIC8vIENoZWNrcyB0aGUgdmFsaWRpdHkgb2YgYW4gaW5wdXQgZWxlbWVudCBhbmQgc2hvd3MvaGlkZXMgZXJyb3IgbWVzc2FnZXMgYWNjb3JkaW5nbHlcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKSB7XG4gICAgaWYgKCFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICByZXR1cm4gdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbCk7XG4gICAgfVxuICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWwpO1xuICB9XG5cbiAgLy8gQ2hlY2tzIGlmIHRoZSBmb3JtIGhhcyBhbnkgaW52YWxpZCBpbnB1dHNcbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcbiAgICByZXR1cm4gIXRoaXMuX2lucHV0RWxzLmV2ZXJ5KChpbnB1dEVsKSA9PiBpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKTtcbiAgfVxuXG4gIC8vIFRvZ2dsZXMgdGhlIHN0YXRlIG9mIHRoZSBzdWJtaXQgYnV0dG9uIGJhc2VkIG9uIGZvcm0gdmFsaWRpdHlcbiAgdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gIH1cblxuICAvLyBTZXRzIHVwIGV2ZW50IGxpc3RlbmVycyBmb3IgaW5wdXQgZWxlbWVudHNcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2lucHV0RWxzID0gWy4uLnRoaXMuX2Zvcm1FbC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtRWwucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG5cbiAgICB0aGlzLl9pbnB1dEVscy5mb3JFYWNoKChpbnB1dEVsKSA9PiB7XG4gICAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoZSkgPT4ge1xuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbCk7XG4gICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gRW5hYmxlcyBmb3JtIHZhbGlkYXRpb24gYnkgc2V0dGluZyB1cCBuZWNlc3NhcnkgZXZlbnQgbGlzdGVuZXJzXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgLy8gUHJldmVudHMgZm9ybSBzdWJtaXNzaW9uIGFuZCBoYW5kbGVzIHZhbGlkYXRpb24gbWFudWFsbHlcbiAgICB0aGlzLl9mb3JtRWwuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuXG4gICAgLy8gU2V0cyB1cCBldmVudCBsaXN0ZW5lcnMgZm9yIGlucHV0IGVsZW1lbnRzXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnModGhpcy5fZm9ybUVsKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBGb3JtVmFsaWRhdG9yO1xuIiwiY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IgfSkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7IC8vIFRoZSBwb3B1cCBlbGVtZW50IHRvIG1hbmlwdWxhdGVcbiAgICB0aGlzLl9jbG9zZUJ5RXNjYXBlID0gdGhpcy5fY2xvc2VCeUVzY2FwZS5iaW5kKHRoaXMpOyAvLyBCaW5kcyB0aGUgY2xvc2VCeUVzY2FwZSBtZXRob2QgdG8gdGhlIGNsYXNzIGluc3RhbmNlXG4gICAgdGhpcy5fY2xvc2VCeU1vdXNlRG93biA9IHRoaXMuX2Nsb3NlQnlNb3VzZURvd24uYmluZCh0aGlzKTsgLy8gQmluZHMgdGhlIGNsb3NlQnlNb3VzZURvd24gbWV0aG9kIHRvIHRoZSBjbGFzcyBpbnN0YW5jZVxuICB9XG5cbiAgLy8gT3BlbnMgdGhlIHBvcHVwXG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7IC8vIEFkZHMgdGhlIFwibW9kYWxfb3BlbmVkXCIgY2xhc3MgdG8gc2hvdyB0aGUgcG9wdXBcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpOyAvLyBTZXRzIHVwIGV2ZW50IGxpc3RlbmVycyB0byBoYW5kbGUgY2xvc2luZyB0aGUgcG9wdXBcbiAgfVxuXG4gIC8vIENsb3NlcyB0aGUgcG9wdXBcbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7IC8vIFJlbW92ZXMgdGhlIFwibW9kYWxfb3BlbmVkXCIgY2xhc3MgdG8gaGlkZSB0aGUgcG9wdXBcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2Nsb3NlQnlNb3VzZURvd24pOyAvLyBSZW1vdmVzIHRoZSBldmVudCBsaXN0ZW5lciBmb3IgY2xvc2luZyBieSBtb3VzZSBkb3duXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5fY2xvc2VCeUVzY2FwZSk7IC8vIFJlbW92ZXMgdGhlIGV2ZW50IGxpc3RlbmVyIGZvciBjbG9zaW5nIGJ5IEVzY2FwZSBrZXlcbiAgfVxuXG4gIC8vIENsb3NlcyB0aGUgcG9wdXAgd2hlbiB0aGUgRXNjYXBlIGtleSBpcyBwcmVzc2VkXG4gIF9jbG9zZUJ5RXNjYXBlID0gKGUpID0+IHtcbiAgICBpZiAoZS5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTsgLy8gQ2FsbHMgdGhlIGNsb3NlIG1ldGhvZCB0byBjbG9zZSB0aGUgcG9wdXBcbiAgICB9XG4gIH07XG5cbiAgLy8gQ2xvc2VzIHRoZSBwb3B1cCB3aGVuIGNsaWNrZWQgb3V0c2lkZSB0aGUgcG9wdXAgb3Igb24gdGhlIGNsb3NlIGJ1dHRvblxuICBfY2xvc2VCeU1vdXNlRG93biA9IChlKSA9PiB7XG4gICAgaWYgKFxuICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxcIikgfHxcbiAgICAgIGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX19jbG9zZVwiKVxuICAgICkge1xuICAgICAgdGhpcy5jbG9zZSgpOyAvLyBDYWxscyB0aGUgY2xvc2UgbWV0aG9kIHRvIGNsb3NlIHRoZSBwb3B1cFxuICAgIH1cbiAgfTtcblxuICAvLyBTZXRzIHVwIGV2ZW50IGxpc3RlbmVycyBmb3IgY2xvc2luZyB0aGUgcG9wdXBcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2Nsb3NlQnlFc2NhcGUpOyAvLyBMaXN0ZW5zIGZvciB0aGUgRXNjYXBlIGtleWRvd24gZXZlbnQgdG8gY2xvc2UgdGhlIHBvcHVwXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9jbG9zZUJ5TW91c2VEb3duKTsgLy8gTGlzdGVucyBmb3IgbW91c2UgZG93biBldmVudHMgdG8gY2xvc2UgdGhlIHBvcHVwXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUG9wdXA7XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXAuanNcIjtcblxuY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTsgLy8gQ2FsbHMgdGhlIGNvbnN0cnVjdG9yIG9mIHRoZSBwYXJlbnQgY2xhc3MgKFBvcHVwKSBhbmQgcGFzc2VzIHRoZSBwb3B1cFNlbGVjdG9yXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7IC8vIFRoZSBmdW5jdGlvbiB0byBoYW5kbGUgZm9ybSBzdWJtaXNzaW9uXG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7IC8vIFRoZSBmb3JtIGVsZW1lbnQgd2l0aGluIHRoZSBwb3B1cFxuICB9XG5cbiAgLy8gT3ZlcnJpZGVzIHRoZSBjbG9zZSBtZXRob2Qgb2YgdGhlIHBhcmVudCBjbGFzcyAoUG9wdXApIHRvIGluY2x1ZGUgYWRkaXRpb25hbCBmdW5jdGlvbmFsaXR5XG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpOyAvLyBSZXNldHMgdGhlIGZvcm0gaW5wdXRzIHdpdGhpbiB0aGUgcG9wdXBcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCB0aGlzLl9zdWJtaXRGb3JtKTsgLy8gUmVtb3ZlIHRoZSBzdWJtaXQgaGFuZGxlclxuICAgIHN1cGVyLmNsb3NlKCk7IC8vIENhbGxzIHRoZSBjbG9zZSBtZXRob2Qgb2YgdGhlIHBhcmVudCBjbGFzcyB0byBjbG9zZSB0aGUgcG9wdXBcbiAgfVxuXG4gIC8vIFJldHJpZXZlcyB0aGUgdmFsdWVzIG9mIHRoZSBmb3JtIGlucHV0cyBhbmQgcmV0dXJucyB0aGVtIGFzIGFuIG9iamVjdFxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgY29uc3QgaW5wdXRzT2JqZWN0ID0ge307XG4gICAgY29uc3QgaW5wdXRMaXN0ID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2lucHV0XCIpO1xuICAgIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgaWYgKGlucHV0LnZhbHVlICE9PSBcIlwiKSB7XG4gICAgICAgIGlucHV0c09iamVjdFtpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBpbnB1dHNPYmplY3Q7XG4gIH1cblxuICAvLyBTdWJtaXRzIHRoZSBmb3JtIGJ5IGNhbGxpbmcgdGhlIGhhbmRsZUZvcm1TdWJtaXQgZnVuY3Rpb24gd2l0aCB0aGUgaW5wdXQgdmFsdWVzXG4gIF9zdWJtaXRGb3JtID0gKCkgPT4ge1xuICAgIGNvbnN0IGlucHV0VmFsdWVzID0gdGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKTtcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KGlucHV0VmFsdWVzKTtcbiAgfTtcblxuICAvLyBTZXRzIHVwIGV2ZW50IGxpc3RlbmVycyBmb3IgdGhlIHBvcHVwXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5fc2V0RXZlbnRMaXN0ZW5lcnMoKTsgLy8gU2V0cyB1cCBldmVudCBsaXN0ZW5lcnMgaW5oZXJpdGVkIGZyb20gdGhlIHBhcmVudCBjbGFzcyAoUG9wdXApXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgdGhpcy5fc3VibWl0Rm9ybSk7IC8vIExpc3RlbnMgZm9yIGZvcm0gc3VibWlzc2lvbiB0byB0cmlnZ2VyIHRoZSBfc3VibWl0Rm9ybSBtZXRob2RcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhGb3JtO1xuIiwiLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXJyYXlzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIG5hbWU6IFwiU2VhdHRsZSwgV0FcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTAyMTc1MzUzMTc0LWE3YTcwZTczYjM2Mj9peGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0QmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz0xNDI2JnE9ODBcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiRGVudmVyLCBDT1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly93d3cuNTVwbGFjZXMuY29tL3dwLWNvbnRlbnQvdXBsb2Fkcy8yMDIyLzExL2Rvd250b3duLWRlbnZlci1jb2xvcmFkby5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiT3JsYW5kbywgRkxcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vd29ybGRzdHJpZGVzLmNvbS93cC1jb250ZW50L3VwbG9hZHMvMjAxNi8wNi9pU3RvY2tfNTgwNjg4NTRfTEFSR0UuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhcyBWZWdhcywgTlZcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTgxMzUxNzIxMDEwLThjZjg1OWNiMTRhND9peGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0QmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz0xNDcwJnE9ODBcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiU2FudGEgTW9uaWNhLCBDQVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE0OTgxOTY2NDUxNDUtNjg3ZmQzYmZlOTEyP2l4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTE0NzAmcT04MFwiLFxuICB9LFxuXG4gIHtcbiAgICBuYW1lOiBcIkp1bmVhdSwgQUtcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vd3d3Lm1hcmtrZWxsZXkuY29tL3dwLWNvbnRlbnQvdXBsb2Fkcy8yMDE5LzExL29ydGhlcm5fTGlnaHRzX01lbmRlbmhhbGxfR2xhY2llcl9KdW5lYXVfY2FsZW5kYXJfMjAxNzExMDhfTWVuZGVuaGFsbF9HbGFjaWVyX05vcnRoZXJuX0xpZ2h0c18wNjEtRWRpdC03LUVkaXQtNS1FZGl0LTItOTQweDY1OC5qcGdcIixcbiAgfSxcbl07XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDb25zdGFudHMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRWxlbWVudHMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbi8vIENvbmZpZ3VyYXRpb24gZm9yIGZvcm0gdmFsaWRhdGlvblxuZXhwb3J0IGNvbnN0IGZvcm1WYWxpZGF0b3JDb25maWcgPSB7XG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcbn07XG5cbi8vIFByb2ZpbGUgZWRpdCBidXR0b24gYW5kIG1vZGFsIGVsZW1lbnRzXG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1idXR0b25cIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LW1vZGFsXCIpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVUaXRsZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLXRpdGxlLWlucHV0XCIpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIjcHJvZmlsZS1kZXNjcmlwdGlvbi1pbnB1dFwiXG4pO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0Rm9ybSA9IHByb2ZpbGVFZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcblxuLy8gQWRkIGNhcmQgYnV0dG9uIGFuZCBtb2RhbCBlbGVtZW50c1xuZXhwb3J0IGNvbnN0IGFkZENhcmRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWZvcm0tbW9kYWxcIik7XG5leHBvcnQgY29uc3QgYWRkTmV3Q2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1hZGQtYnV0dG9uXCIpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVBZGRDYXJkRm9ybSA9IGFkZENhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuXG4vLyBDYXJkcyBjb250YWluZXIgZWxlbWVudFxuZXhwb3J0IGNvbnN0IGNhcmRzV3JhcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2xpc3RcIik7XG4iLCIvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEltcG9ydHMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCBcIi4uL3BhZ2VzL2luZGV4LmNzc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcbmltcG9ydCB7XG4gIGluaXRpYWxDYXJkcyxcbiAgZm9ybVZhbGlkYXRvckNvbmZpZyxcbiAgcHJvZmlsZUVkaXRCdXR0b24sXG4gIHByb2ZpbGVUaXRsZUlucHV0LFxuICBwcm9maWxlRGVzY3JpcHRpb25JbnB1dCxcbiAgcHJvZmlsZUVkaXRGb3JtLFxuICBhZGROZXdDYXJkQnV0dG9uLFxuICBwcm9maWxlQWRkQ2FyZEZvcm0sXG4gIGNhcmRzV3JhcCxcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRnVuY3Rpb25zICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbi8vIFVzZXIgaW5mb3JtYXRpb25cbmV4cG9ydCBjb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyhcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX190aXRsZVwiKSxcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiKVxuKTtcblxuLy8gUG9wdXAgZm9yIGltYWdlIHByZXZpZXdcbmV4cG9ydCBjb25zdCBwcmV2aWV3SW1hZ2VQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIiNwcmV2aWV3LW1vZGFsXCIpO1xuXG4vLyBQb3B1cCBmb3IgcHJvZmlsZSBlZGl0IGZvcm1cbmV4cG9ydCBjb25zdCBlZGl0UG9wdXBGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gIFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiLFxuICBoYW5kbGVFZGl0UHJvZmlsZVN1Ym1pdFxuKTtcblxuLy8gUG9wdXAgZm9yIGFkZCBjYXJkIGZvcm1cbmV4cG9ydCBjb25zdCBhZGRDYXJkUG9wdXBGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gIFwiI2FkZC1mb3JtLW1vZGFsXCIsXG4gIGhhbmRsZUFkZENhcmRGb3JtU3VibWl0XG4pO1xuXG4vLyBFdmVudCBoYW5kbGVyIGZvciBjYXJkIGltYWdlIGNsaWNrIChvcGVucyBwcmV2aWV3IHBvcHVwKVxuZnVuY3Rpb24gaGFuZGxlQ2FyZEltYWdlQ2xpY2soeyBuYW1lLCBsaW5rIH0pIHtcbiAgcHJldmlld0ltYWdlUG9wdXAub3BlbihuYW1lLCBsaW5rKTtcbn1cblxuLy8gRXZlbnQgbGlzdGVuZXIgZm9yIGFkZCBuZXcgY2FyZCBidXR0b24gY2xpY2tcbmFkZE5ld0NhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgYWRkRm9ybVZhbGlkYXRvci50b2dnbGVCdXR0b25TdGF0ZSgpO1xuICBhZGRDYXJkUG9wdXBGb3JtLm9wZW4oKTtcbn0pO1xuXG4vLyBFdmVudCBsaXN0ZW5lciBmb3IgcHJvZmlsZSBlZGl0IGJ1dHRvbiBjbGlja1xucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgY29uc3QgeyBwcm9maWxlTmFtZSwgZGVzY3JpcHRpb24gfSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG4gIHByb2ZpbGVUaXRsZUlucHV0LnZhbHVlID0gcHJvZmlsZU5hbWU7XG4gIHByb2ZpbGVEZXNjcmlwdGlvbklucHV0LnZhbHVlID0gZGVzY3JpcHRpb247XG4gIGVkaXRGb3JtVmFsaWRhdG9yLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gIGVkaXRQb3B1cEZvcm0ub3BlbigpO1xufSk7XG5cbi8vIEZ1bmN0aW9uIHRvIHJlbmRlciBhIGNhcmRcbmZ1bmN0aW9uIHJlbmRlckNhcmQoY2FyZERhdGEpIHtcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKGNhcmREYXRhLCBcIiNjYXJkLXRlbXBsYXRlXCIsIGhhbmRsZUNhcmRJbWFnZUNsaWNrKTtcbiAgc2VjdGlvbi5hZGRJdGVtKGNhcmQuZ2V0Q2FyZEVsZW1lbnQoKSk7XG59XG5cbi8vIFNlY3Rpb24gZm9yIG1hbmFnaW5nIGNhcmRzXG5jb25zdCBzZWN0aW9uID0gbmV3IFNlY3Rpb24oXG4gIHtcbiAgICBpdGVtczogaW5pdGlhbENhcmRzLFxuICAgIHJlbmRlcmVyOiByZW5kZXJDYXJkLFxuICB9LFxuICBjYXJkc1dyYXBcbik7XG5cbi8vIFJlbmRlciBpbml0aWFsIGNhcmRzXG5zZWN0aW9uLnJlbmRlckl0ZW1zKCk7XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBIYW5kbGVycyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuLy8gRXZlbnQgaGFuZGxlciBmb3IgcHJvZmlsZSBlZGl0IGZvcm0gc3VibWlzc2lvblxuZnVuY3Rpb24gaGFuZGxlRWRpdFByb2ZpbGVTdWJtaXQoZm9ybURhdGEpIHtcbiAgY29uc3QgeyBuYW1lSW5mbywgam9iSW5mbyB9ID0gZm9ybURhdGE7XG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKG5hbWVJbmZvLCBqb2JJbmZvKTtcbiAgZWRpdFBvcHVwRm9ybS5jbG9zZSgpO1xufVxuXG4vLyBFdmVudCBoYW5kbGVyIGZvciBhZGQgY2FyZCBmb3JtIHN1Ym1pc3Npb25cbmZ1bmN0aW9uIGhhbmRsZUFkZENhcmRGb3JtU3VibWl0KGlucHV0VmFsdWVzKSB7XG4gIGNvbnN0IHsgbmFtZSwgbGluayB9ID0gaW5wdXRWYWx1ZXM7XG4gIHJlbmRlckNhcmQoeyBuYW1lLCBsaW5rIH0pO1xuICBhZGRDYXJkUG9wdXBGb3JtLmNsb3NlKCk7XG59XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRm9ybSBWYWxpZGF0aW9uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuLy8gRm9ybSB2YWxpZGF0aW9uIGZvciBhZGQgY2FyZCBmb3JtXG5jb25zdCBhZGRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXG4gIGZvcm1WYWxpZGF0b3JDb25maWcsXG4gIHByb2ZpbGVBZGRDYXJkRm9ybVxuKTtcbmFkZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG4vLyBGb3JtIHZhbGlkYXRpb24gZm9yIHByb2ZpbGUgZWRpdCBmb3JtXG5jb25zdCBlZGl0Rm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxuICBmb3JtVmFsaWRhdG9yQ29uZmlnLFxuICBwcm9maWxlRWRpdEZvcm1cbik7XG5lZGl0Rm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG4iLCJjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKG5hbWVFbGVtZW50LCBqb2JFbGVtZW50KSB7XG4gICAgdGhpcy5fbmFtZUVsZW1lbnQgPSBuYW1lRWxlbWVudDsgLy8gVGhlIERPTSBlbGVtZW50IHdoZXJlIHRoZSB1c2VyJ3MgbmFtZSB3aWxsIGJlIGRpc3BsYXllZFxuICAgIHRoaXMuX2pvYkVsZW1lbnQgPSBqb2JFbGVtZW50OyAvLyBUaGUgRE9NIGVsZW1lbnQgd2hlcmUgdGhlIHVzZXIncyBqb2IgZGVzY3JpcHRpb24gd2lsbCBiZSBkaXNwbGF5ZWRcbiAgfVxuXG4gIC8vIFJldHJpZXZlcyB0aGUgdXNlciBpbmZvIGZyb20gdGhlIERPTSBlbGVtZW50cyBhbmQgcmV0dXJucyBpdCBhcyBhbiBvYmplY3RcbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgY29uc3QgdXNlck9iamVjdCA9IHt9O1xuICAgIHVzZXJPYmplY3QucHJvZmlsZU5hbWUgPSB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudDtcbiAgICB1c2VyT2JqZWN0LmRlc2NyaXB0aW9uID0gdGhpcy5fam9iRWxlbWVudC50ZXh0Q29udGVudDtcbiAgICByZXR1cm4gdXNlck9iamVjdDtcbiAgfVxuXG4gIC8vIFNldHMgdGhlIHVzZXIgaW5mbyBpbiB0aGUgRE9NIGVsZW1lbnRzXG4gIHNldFVzZXJJbmZvKG5hbWVJbmZvLCBqb2JJbmZvKSB7XG4gICAgdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSBuYW1lSW5mbzsgLy8gU2V0cyB0aGUgdXNlcidzIG5hbWUgaW4gdGhlIG5hbWUgZWxlbWVudFxuICAgIHRoaXMuX2pvYkVsZW1lbnQudGV4dENvbnRlbnQgPSBqb2JJbmZvOyAvLyBTZXRzIHRoZSB1c2VyJ3Mgam9iIGRlc2NyaXB0aW9uIGluIHRoZSBqb2IgZWxlbWVudFxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFVzZXJJbmZvO1xuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pOyAvLyBDYWxscyB0aGUgY29uc3RydWN0b3Igb2YgdGhlIHBhcmVudCBjbGFzcyAoUG9wdXApIGFuZCBwYXNzZXMgdGhlIHBvcHVwU2VsZWN0b3JcbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2VFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fcHJldmlldy1pbWFnZVwiKTsgLy8gVGhlIHByZXZpZXcgaW1hZ2UgZWxlbWVudCB3aXRoaW4gdGhlIHBvcHVwXG4gICAgdGhpcy5fcHJldmlld0ltYWdlRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCIubW9kYWxfX3ByZXZpZXctZGVzY3JpcHRpb25cIlxuICAgICk7IC8vIFRoZSBkZXNjcmlwdGlvbiBlbGVtZW50IHdpdGhpbiB0aGUgcG9wdXBcbiAgfVxuXG4gIC8vIE92ZXJyaWRlcyB0aGUgb3BlbiBtZXRob2Qgb2YgdGhlIHBhcmVudCBjbGFzcyAoUG9wdXApIHRvIGluY2x1ZGUgYWRkaXRpb25hbCBmdW5jdGlvbmFsaXR5XG4gIG9wZW4obmFtZSwgbGluaykge1xuICAgIHRoaXMuX3ByZXZpZXdJbWFnZUVsZW1lbnQuYWx0ID0gbmFtZTsgLy8gU2V0cyB0aGUgYWx0IGF0dHJpYnV0ZSBvZiB0aGUgcHJldmlldyBpbWFnZSBlbGVtZW50XG4gICAgdGhpcy5fcHJldmlld0ltYWdlRGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSBuYW1lOyAvLyBTZXRzIHRoZSB0ZXh0IGNvbnRlbnQgb2YgdGhlIGRlc2NyaXB0aW9uIGVsZW1lbnRcbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2VFbGVtZW50LnNyYyA9IGxpbms7IC8vIFNldHMgdGhlIHNyYyBhdHRyaWJ1dGUgb2YgdGhlIHByZXZpZXcgaW1hZ2UgZWxlbWVudFxuICAgIHN1cGVyLm9wZW4oKTsgLy8gQ2FsbHMgdGhlIG9wZW4gbWV0aG9kIG9mIHRoZSBwYXJlbnQgY2xhc3MgdG8gb3BlbiB0aGUgcG9wdXBcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhJbWFnZTtcbiIsImNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJFbGVtZW50KSB7XG4gICAgdGhpcy5faXRlbXMgPSBpdGVtczsgLy8gVGhlIGFycmF5IG9mIGl0ZW1zIHRvIHJlbmRlclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7IC8vIFRoZSByZW5kZXJpbmcgZnVuY3Rpb24gdG8gYmUgYXBwbGllZCB0byBlYWNoIGl0ZW1cbiAgICB0aGlzLl9jb250YWluZXJFbGVtZW50ID0gY29udGFpbmVyRWxlbWVudDsgLy8gVGhlIGNvbnRhaW5lciBlbGVtZW50IHdoZXJlIHRoZSBpdGVtcyB3aWxsIGJlIHJlbmRlcmVkXG4gIH1cblxuICAvLyBSZW5kZXJzIGFsbCBpdGVtcyBpbiB0aGUgc2VjdGlvbiB1c2luZyB0aGUgcHJvdmlkZWQgcmVuZGVyZXIgZnVuY3Rpb25cbiAgcmVuZGVySXRlbXMoKSB7XG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCh0aGlzLl9yZW5kZXJlcik7IC8vIEl0ZXJhdGVzIG92ZXIgZWFjaCBpdGVtIGFuZCBhcHBsaWVzIHRoZSByZW5kZXJlciBmdW5jdGlvblxuICB9XG5cbiAgLy8gQWRkcyBhbiBpdGVtIHRvIHRoZSBlbmQgb2YgdGhlIHNlY3Rpb25cbiAgYWRkSXRlbShjYXJkRWxlbWVudCkge1xuICAgIHRoaXMuX2NvbnRhaW5lckVsZW1lbnQucHJlcGVuZChjYXJkRWxlbWVudCk7IC8vIEFwcGVuZHMgdGhlIGNhcmQgZWxlbWVudCB0byB0aGUgY29udGFpbmVyXG4gIH1cblxuICAvLyBBZGRzIGFuIGl0ZW0gdG8gdGhlIGJlZ2lubmluZyBvZiB0aGUgc2VjdGlvblxuICBwcmVwZW5kSXRlbShjYXJkRWxlbWVudCkge1xuICAgIHRoaXMuX2NvbnRhaW5lckVsZW1lbnQucHJlcGVuZChjYXJkRWxlbWVudCk7IC8vIFByZXBlbmRzIHRoZSBjYXJkIGVsZW1lbnQgdG8gdGhlIGNvbnRhaW5lclxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFNlY3Rpb247XG4iXSwibmFtZXMiOlsiY29uc3RydWN0b3IiLCJjb25maWciLCJfZm9ybUVsIiwidGhpcyIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWwiLCJlcnJvck1lc3NhZ2VFbCIsInF1ZXJ5U2VsZWN0b3IiLCJpZCIsImNsYXNzTGlzdCIsImFkZCIsInRleHRDb250ZW50IiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJyZW1vdmUiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfaW5wdXRFbHMiLCJldmVyeSIsInRvZ2dsZUJ1dHRvblN0YXRlIiwiX3N1Ym1pdEJ1dHRvbiIsImRpc2FibGVkIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsImVuYWJsZVZhbGlkYXRpb24iLCJwcmV2ZW50RGVmYXVsdCIsIl9yZWYiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsImRvY3VtZW50IiwiX2Nsb3NlQnlFc2NhcGUiLCJiaW5kIiwiX2Nsb3NlQnlNb3VzZURvd24iLCJvcGVuIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwia2V5IiwidGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cCIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX3BvcHVwRm9ybSIsInJlc2V0IiwiX3N1Ym1pdEZvcm0iLCJfZ2V0SW5wdXRWYWx1ZXMiLCJpbnB1dHNPYmplY3QiLCJpbnB1dCIsInZhbHVlIiwibmFtZSIsImlucHV0VmFsdWVzIiwiZm9ybVZhbGlkYXRvckNvbmZpZyIsInByb2ZpbGVFZGl0QnV0dG9uIiwicHJvZmlsZUVkaXRNb2RhbCIsInByb2ZpbGVUaXRsZUlucHV0IiwicHJvZmlsZURlc2NyaXB0aW9uSW5wdXQiLCJwcm9maWxlRWRpdEZvcm0iLCJhZGRDYXJkTW9kYWwiLCJhZGROZXdDYXJkQnV0dG9uIiwicHJvZmlsZUFkZENhcmRGb3JtIiwiY2FyZHNXcmFwIiwidXNlckluZm8iLCJuYW1lRWxlbWVudCIsImpvYkVsZW1lbnQiLCJfbmFtZUVsZW1lbnQiLCJfam9iRWxlbWVudCIsImdldFVzZXJJbmZvIiwidXNlck9iamVjdCIsInByb2ZpbGVOYW1lIiwiZGVzY3JpcHRpb24iLCJzZXRVc2VySW5mbyIsIm5hbWVJbmZvIiwiam9iSW5mbyIsInByZXZpZXdJbWFnZVBvcHVwIiwiX3ByZXZpZXdJbWFnZUVsZW1lbnQiLCJfcHJldmlld0ltYWdlRGVzY3JpcHRpb24iLCJsaW5rIiwiYWx0Iiwic3JjIiwiZWRpdFBvcHVwRm9ybSIsIlBvcHVwV2l0aEZvcm0iLCJmb3JtRGF0YSIsImFkZENhcmRQb3B1cEZvcm0iLCJyZW5kZXJDYXJkIiwiaGFuZGxlQ2FyZEltYWdlQ2xpY2siLCJjYXJkRGF0YSIsImNhcmQiLCJkYXRhIiwidGVtcGxhdGVTZWxlY3RvciIsInByZXZpZXdJbWFnZU1vZGFsIiwicHJldmlld0Rlc2NyaXB0aW9uTW9kYWwiLCJfbmFtZSIsIl9saW5rIiwiX3RlbXBsYXRlU2VsZWN0b3IiLCJfaGFuZGxlQ2FyZEltYWdlQ2xpY2siLCJfcHJldmlld0ltYWdlTW9kYWwiLCJfcHJldmlld0Rlc2NyaXB0aW9uTW9kYWwiLCJfZ2V0VGVtcGxhdGUiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2hhbmRsZURlbGV0ZUJ1dHRvbiIsIl9jYXJkRWxlbWVudCIsIl9oYW5kbGVMaWtlQnV0dG9uIiwidG9nZ2xlIiwiZ2V0Q2FyZEVsZW1lbnQiLCJzZWN0aW9uIiwiYWRkSXRlbSIsImFkZEZvcm1WYWxpZGF0b3IiLCJlZGl0Rm9ybVZhbGlkYXRvciIsImNvbnRhaW5lckVsZW1lbnQiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lckVsZW1lbnQiLCJyZW5kZXJJdGVtcyIsImNhcmRFbGVtZW50IiwicHJlcGVuZCIsInByZXBlbmRJdGVtIiwiRm9ybVZhbGlkYXRvciJdLCJzb3VyY2VSb290IjoiIn0=